{"version":3,"sources":["store/characters/types.ts","components/formElements/Input/index.tsx","components/forms/CharacterForm/hooks.ts","components/formElements/Select/index.tsx","components/forms/CharacterForm/validation.ts","helpers/getFormikError.ts","components/forms/CharacterForm/index.tsx","pages/CharacterUpdate/hooks.tsx","pages/CharacterUpdate/index.tsx"],"names":["ClassType","Input","name","props","field","TextField","defaultProps","variant","useAddOrUpdateCharacter","character","dispatch","useDispatch","history","useHistory","values","actions","updateCharacter","addCharacter","createNewCharacter","push","formValues","level","defence","accuracy","classType","useDeleteCharacter","removeCharacter","Select","id","options","label","FormControl","InputLabel","labelId","map","option","MenuItem","value","validationObject","Yup","required","test","length","isMoreThanZero","oneOf","Object","validationSchema","defined","getError","property","form","submitCount","touched","errors","undefined","CharacterForm","handleSubmit","handleDelete","Container","maxWidth","Paper","style","padding","initialValues","getInitialValues","onSubmit","formProps","Grid","container","alignItems","spacing","item","xs","sm","disabled","error","hasError","helperText","getClassesAsOptions","type","Button","color","onClick","BEGINNER","getCharacter","characterName","useParams","useSelector","state","characters","find","CharacterUpdate","Box","Typography","gutterBottom"],"mappings":"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","file":"static/js/6.c04e69a4.chunk.js","sourcesContent":["export interface CharactersState {\n  characters: Character[]\n}\n\nexport interface Character {\n  name: string;\n  classType: ClassType;\n  level: number;\n  defence: number;\n  accuracy: number;\n  skills?: Skills\n}\n\nexport enum ClassType {\n  BEGINNER = 'Beginner',\n  JOURNEYMAN = 'Journeyman',\n  WARRIOR = 'Warrior',\n  BARBARIAN = 'Barbarian',\n  SQUIRE = 'Squire',\n  ARCHER = 'Archer',\n  BOWMAN = 'Bowman',\n  HUNTER = 'Hunter',\n  MAGE = 'Mage',\n  WIZARD = 'Wizard',\n  SHAMAN = 'Shaman'\n}\n\ninterface Skills {\n  mining?: Skill;\n  chopping?: Skill;\n  fishing?: Skill;\n  catching?: Skill;\n  smithing?: AnvilStats;\n  alchemy?: Skill;\n}\n\ninterface Skill {\n  level: number;\n}\n\ninterface AnvilStats extends Skill {\n  bonusExp: number;\n  speedPerHour: number;\n  capacity: number;\n}\n","import { TextField, TextFieldProps } from '@material-ui/core';\nimport { Field, FieldProps } from 'formik';\nimport React from 'react';\n\ntype InputProps = TextFieldProps & {\n  variant?: 'filled' | 'outlined'\n}\n\nexport const Input: React.FC<InputProps> = ({ name, ...props }: InputProps) => (\n  <Field name={name}>\n    {({ field }: FieldProps) => (\n      <TextField {...props} {...field} />\n    )}\n  </Field>\n);\n\nInput.defaultProps = {\n  variant: 'filled',\n};\n\nexport default Input;\n","import { useDispatch } from 'react-redux';\nimport { useHistory } from 'react-router';\nimport { Character } from '../../../store/characters/types';\n\nimport { actions } from '../../../store/characters/slice';\nimport { CharacterFormFields } from '.';\n\nexport const useAddOrUpdateCharacter = (\n  character?: Character,\n): ((values: CharacterFormFields) => void\n  ) => {\n  const dispatch = useDispatch();\n  const history = useHistory();\n  return (values: CharacterFormFields) => {\n    if (character) {\n      dispatch(actions.updateCharacter({ ...character, ...values }));\n    } else {\n      dispatch(actions.addCharacter(createNewCharacter(values)));\n    }\n    history.push('/');\n  };\n};\n\nconst createNewCharacter = (formValues: CharacterFormFields):Character => ({\n  name: formValues.name,\n  level: formValues.level,\n  defence: formValues.defence,\n  accuracy: formValues.accuracy,\n  classType: formValues.classType,\n});\n\nexport const useDeleteCharacter = (character?: Character)\n  : ((event: any) => void) => {\n  const dispatch = useDispatch();\n  const history = useHistory();\n  return () => {\n    if (character) {\n      dispatch(actions.removeCharacter(character));\n      history.push('/');\n    }\n  };\n};\n\nexport default { useAddOrUpdateCharacter, useDeleteCharacter };\n","import {\n  FormControl,\n  InputLabel, MenuItem, Select as MaterialSelect, SelectProps as MaterialSelectProps,\n} from '@material-ui/core';\nimport { Field, FieldProps } from 'formik';\nimport React from 'react';\n\ninterface Option {\n  value: string | number,\n  label: string,\n}\n\ninterface SelectProps extends MaterialSelectProps {\n  variant?: 'filled' | 'outlined'\n  options: Option[],\n}\n\nexport const Select: React.FC<SelectProps> = ({\n  id, name, options, label, ...props\n}: SelectProps) => (\n  <Field name={name}>\n\n    {({ field }: FieldProps) => (\n      <FormControl>\n        <InputLabel id={`${id}-select-label`}>{label}</InputLabel>\n        <MaterialSelect {...props} {...field} labelId={`${id}-select-label`}>\n          {options.map((option) => (\n            <MenuItem key={option.value} value={option.value}>\n              {option.label}\n            </MenuItem>\n          ))}\n        </MaterialSelect>\n      </FormControl>\n    )}\n  </Field>\n);\n\nSelect.defaultProps = {\n  variant: 'filled',\n};\n\nexport default Select;\n","import * as Yup from 'yup';\nimport { CharacterFormFields } from '.';\nimport { ClassType } from '../../../store/characters/types';\n\nconst validationObject = {\n  name: Yup.string()\n    .required('Name is required')\n    .test('minLenght', 'Name has to be atleast one character', (name) => (name ? name.length > 0 : false)),\n  level: Yup.number()\n    .required('Level is required')\n    .test('minimum', 'Can\\'t be less than 1', (level) => (isMoreThanZero(level))),\n  defence: Yup.number()\n    .required('Defence is required')\n    .test('minimum', 'Can\\'t be less than 1', (defence) => (isMoreThanZero(defence))),\n  accuracy: Yup.number()\n    .required('Accuracy is required')\n    .test('minimum', 'Can\\'t be less than 1', (accuracy) => (isMoreThanZero(accuracy))),\n  classType: Yup.mixed().oneOf(Object.values(ClassType)),\n};\n\n// eslint-disable-next-line max-len\nexport const validationSchema = (): Yup.SchemaOf<CharacterFormFields> => Yup.object(validationObject).defined();\n\nexport default validationSchema;\n\nfunction isMoreThanZero(value: number | undefined):\n  boolean | Yup.ValidationError | Promise<boolean | Yup.ValidationError> {\n  return value ? value > 0 : false;\n}\n","import { FormikProps } from 'formik';\n\nexport function getError<T>(property: keyof T, form: FormikProps<T>): any | undefined {\n  return form.submitCount > 0 || form.touched[property] ? form.errors[property] : undefined;\n}\n\nexport default getError;\n","import React from 'react';\nimport { Form, Formik, FormikProps } from 'formik';\nimport {\n  Button, Container, Grid, Paper,\n} from '@material-ui/core';\n\nimport { Character, ClassType } from '../../../store/characters/types';\nimport { Input } from '../../formElements/Input';\nimport { useAddOrUpdateCharacter, useDeleteCharacter } from './hooks';\nimport { Select } from '../../formElements/Select';\nimport { validationSchema } from './validation';\nimport { getError } from '../../../helpers/getFormikError';\n\ninterface CharacterFormProps {\n  character?: Character;\n}\n\nexport interface CharacterFormFields {\n  name: string,\n  level: number,\n  defence: number,\n  accuracy: number,\n  classType: ClassType\n}\n\nexport const CharacterForm: React.FC<CharacterFormProps> = ({ character }: CharacterFormProps) => {\n  const handleSubmit = useAddOrUpdateCharacter(character);\n  const handleDelete = useDeleteCharacter(character);\n\n  return (\n    <Container maxWidth=\"sm\">\n      <Paper style={{ padding: 16 }}>\n        <Formik\n          initialValues={getInitialValues(character)}\n          validationSchema={validationSchema}\n          onSubmit={handleSubmit}\n        >\n          {(formProps: FormikProps<CharacterFormFields>) => (\n            <Form>\n              <Grid container alignItems=\"flex-start\" spacing={2}>\n                <Grid item xs={12} sm={6}>\n                  <Input id=\"name\" name=\"name\" label=\"Name\" disabled={character?.name !== undefined} error={hasError('name', formProps)} helperText={getError('name', formProps)} />\n                </Grid>\n                <Grid item xs={12} sm={6}>\n                  <Select id=\"classType\" name=\"classType\" label=\"Class\" options={getClassesAsOptions()} error={hasError('classType', formProps)} />\n                </Grid>\n                <Grid item xs={12} sm={6}>\n                  <Input id=\"level\" name=\"level\" label=\"Level\" type=\"number\" error={hasError('level', formProps)} helperText={getError('level', formProps)} />\n                </Grid>\n                <Grid item xs={12} sm={6}>\n                  <Input id=\"defence\" name=\"defence\" label=\"Defence\" type=\"number\" error={hasError('defence', formProps)} helperText={getError('defence', formProps)} />\n                </Grid>\n                <Grid item xs={12} sm={6}>\n                  <Input id=\"accuracy\" name=\"accuracy\" label=\"Accuracy\" type=\"number\" error={hasError('accuracy', formProps)} helperText={getError('accuracy', formProps)} />\n                </Grid>\n              </Grid>\n              <br />\n              <Button variant=\"contained\" color=\"primary\" type=\"submit\">{character ? 'Update' : 'Add'}</Button>\n              {character && <Button variant=\"text\" color=\"secondary\" type=\"button\" onClick={handleDelete}>Delete</Button>}\n            </Form>\n          )}\n        </Formik>\n\n      </Paper>\n    </Container>\n  );\n};\n\nconst hasError = (property: keyof CharacterFormFields, form: FormikProps<CharacterFormFields>)\n  : boolean => getError(property, form) !== undefined;\n\nconst getClassesAsOptions = () => Object.values(ClassType)\n  .map((value: string) => ({ value, label: value }));\n\nfunction getInitialValues(character: Character | undefined): any {\n  return {\n    name: character?.name ?? '',\n    level: character?.level ?? '',\n    defence: character?.defence ?? '',\n    accuracy: character?.accuracy ?? '',\n    classType: character?.classType ?? ClassType.BEGINNER,\n  };\n}\n\nCharacterForm.defaultProps = {\n  character: undefined,\n};\n\nexport default CharacterForm;\n","import { useSelector } from 'react-redux';\nimport { useParams } from 'react-router';\nimport { ReduxState } from '../../app/rootReducer';\nimport { Character } from '../../store/characters/types';\n\nexport const getCharacter = (): Character | undefined => {\n  const { characterName } = useParams<{ characterName: string }>();\n  const { characters } = useSelector((state: ReduxState) => state.characters);\n  return characters.find((character: Character) => character.name === characterName);\n};\n\nexport default getCharacter;\n","import { Box, Typography } from '@material-ui/core';\nimport React from 'react';\nimport { CharacterForm } from '../../components/forms/CharacterForm';\nimport { getCharacter } from './hooks';\n\nexport const CharacterUpdate: React.FC = (): React.ReactElement => {\n  const character = getCharacter();\n\n  return (\n    <Box>\n      <Typography variant=\"h1\" gutterBottom>{character ? `Edit ${character.name}` : 'Add Character'}</Typography>\n      <CharacterForm character={character} />\n    </Box>\n  );\n};\n\nexport default CharacterUpdate;\n"],"sourceRoot":""}